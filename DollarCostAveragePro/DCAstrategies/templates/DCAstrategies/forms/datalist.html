<input {% include "django/forms/widgets/attrs.html" %} list="datalistoptions">
<datalist id="datalistoptions">{% for group_name, group_choices, group_index in widget.optgroups %}{% if group_name %}
    <optgroup label="{{ group_name }}">{% endif %}{% for option in group_choices %}
        <option value="{{ option.value|stringformat:'s' }}" />
    {% endfor %}{% if group_name %}
    </optgroup>{% endif %}{% endfor %}
</datalist>